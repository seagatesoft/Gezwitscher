

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Djarum Coklat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <script src="socket.io/socket.io.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href="http://app.vootobox.com/app/netra.css" rel="stylesheet" type='text/css'>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../assets/js/html5shiv.js"></script>
      <![endif]-->
      <script src="http://code.jquery.com/jquery-latest.min.js"></script>
      

    </head>

    <body>

        <div class="navbar navbar-inverse navbar-fixed-top menu">
          <div class="navbar-inner">
            <div class="container">
              <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="brand" href="#">HashTag Monitor</a>
            <div class="nav-collapse collapse">

            </div><!--/.nav-collapse -->
        </div>
    </div>
</div>

<div class="container main-body">
     <div class="hero-unit"><h3><time></time></h3></div>
    <div id="container">
       
    </div>
    <div id="template" style="display:none">
        <table class='table table-bordered'>
            <thead>
                <tr><th>NO</th><th>From</th><th>Avatar</th><th>Waktu</th><th>Ocehan</th></tr>
            </thead>
            <tbody id="isi_tweat">

            </tbody>
        </table>
    </div>

</div> <!-- /container -->
<script>
        // creating a new websocket
        var socket = io.connect('http://192.168.1.66:5130');
        // on message received we print the new data inside the #container div
        var twittererere;
        var user_id = 0;
        function load(){
            socket.emit('all', user_id, function (data) {
                var usersList = '';
                $.each(data['hash'],function(index,user){
                    var id_body = "#body_"+user;
                    id_body = id_body.replace (/#/g, "");
                    if($('#'+id_body).length == 0){
                        console.log(id_body);
                        $("#container").append($("#template").html());
                        $("#container #isi_tweat").attr('id',id_body);
                    } 
                });
                $.each(data.users,function(index,user){

                    var id_body = "#body_"+user.filter;
                    id_body = id_body.replace (/#/g, "");

                    usersList = "<tr><td>" + user.id + "</td>" +
                    "<td> @" + user.from + "</td>" +
                    "<td><img src=" +user.profile_image_url+ "></td>" +
                    "<td>" + user.date_twit + "</td>" +
                    "<td>" + user.content + "</td>" +
                    " </tr>";
                    user_id = user.id;
                    $("#"+id_body).prepend(usersList);
                });
                $('time').html('Last Update:' + data.time);
                //console.log(usersList);
            });
        }
        socket.on('connect', function () { // TIP: you can avoid listening on `connect` and listen on events directly too!
            load();
        });
        socket.on('notification', function (data) {
            load(data);
        });
        </script>
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="socket.io/socket.io.js"></script>

    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>



</body>
</html>
